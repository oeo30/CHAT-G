/* =========================
   0) 폰트 로드
   ========================= */
   @font-face {
    font-family: 'Giants';
    src: url('https://cdn.jsdelivr.net/gh/fonts-archive/Giants/Giants-Regular.ttf') format('truetype');
    font-weight: 400; font-style: normal; font-display: swap;
  }
  @font-face {
    font-family: 'Giants Inline';
    src: url('https://cdn.jsdelivr.net/gh/fonts-archive/GiantsInline/GiantsInline.ttf') format('truetype');
    font-weight: 400; font-style: normal; font-display: swap;
  }
  
  /* =========================
     1) 색상/공통 변수
     ========================= */
  :root {
    --bg: #f0f2f6;          /* 전체 배경 */
    --bubble-user: #cad6ec; /* 유저 버블 */
    --bubble-bot: #f0f2f6;  /* 봇 버블 */
    --primary: #022345;     /* 포인트 */
    --border: #e3e6eb;      /* 경계선 */
    --input-h: 48px;        /* 입력창 높이 */
  }
  
  /* =========================
     2) 전역 스타일 + 컨테이너 배경 통일
     ========================= */
  html, body, .stApp {
    background: var(--bg) !important;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body, p, div, span, label, input, textarea, button {
    font-family: 'Giants', system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Arial, sans-serif !important;
  }
  
  h1, h2, h3,
  [data-testid="stMarkdownContainer"] h1,
  [data-testid="stMarkdownContainer"] h2,
  [data-testid="stMarkdownContainer"] h3 {
    font-family: 'Giants Inline', 'Giants', sans-serif !important;
    color: var(--primary);
    text-align: center;
  }
  
  /* 모든 래퍼 배경 통일 및 그림자 제거 */
  .stApp,
  [data-testid="stAppViewContainer"],
  [data-testid="stHeader"],
  [data-testid="stToolbar"],
  [data-testid="stMainBlockContainer"],
  .block-container,
  [data-testid="stAppScrollToBottomContainer"],
  [data-testid="stBottom"],
  [data-testid="stBottom"] > div,
  [data-testid="stBottomBlockContainer"],
  [data-testid="stBottomBlockContainer"] > div,
  [data-testid="stBottomBlockContainer"] > div > div {
    background-color: var(--bg) !important;
    box-shadow: none !important;
  }
  
  /* 상단 메뉴/배포 버튼 숨김 */
  #MainMenu,
  [data-testid="stToolbar"],
  [data-testid="stAppDeployButton"] {
    display: none !important;
  }
  
  /* =========================
     3) 채팅 메시지 버블
     ========================= */
  [data-testid="stChatMessage"] {
    border-radius: 14px !important;
    padding: 12px 14px !important;
    border: 1px solid var(--border);
    box-shadow: 0 1px 0 rgba(0,0,0,.02);
  }
  
  /* 챗봇 버블 (테두리, 그림자 없음) */
  [data-testid="stChatMessage"]:has([data-testid="stChatMessageAvatarAssistant"]) {
    background: var(--bubble-bot) !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  /* 유저 버블 (오른쪽 정렬) */
  [data-testid="stChatMessage"]:has([data-testid="stChatMessageAvatarUser"]) {
    background: var(--bubble-user) !important;
    display: flex !important;
    flex-direction: row-reverse !important;
    align-items: flex-start !important;
    justify-content: flex-end !important;
    text-align: right !important;
  }
  
  [data-testid="stChatMessage"]:has([data-testid="stChatMessageAvatarUser"]) [data-testid="stChatMessageContent"] {
    text-align: right !important;
    align-items: flex-end !important;
  }
  
  /* =========================
     4) 채팅 아바타 (아이콘)
     ========================= */
  [data-testid="stChatMessageAvatarAssistant"] {
    background: url("https://search.pstatic.net/sunny/?src=https%3A%2F%2Fi2.ruliweb.com%2Fori%2F23%2F03%2F13%2F186d8c89ae014688e.webp&type=sc960_832") center/cover no-repeat !important;
    border-radius: 50% !important;
    width: 32px !important;
    height: 32px !important;
  }
  [data-testid="stChatMessageAvatarAssistant"] svg {
    display: none !important;
  }
  
  [data-testid="stChatMessageAvatarUser"] {
    background: url("https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMzA1MDhfNTYg%2FMDAxNjgzNTM4MTg2ODY5.QCqpe6m2oCzyuIvTFM8TeCDlpuTkYFrbX3faQOS13N0g.t9-fl_r-9wrwUctyev7xJ2GO9VSPZF9FxsWe42UqHjog.JPEG.kjae1214%2F1683528916944.jpg&type=sc960_832") center/cover no-repeat !important;
    border-radius: 50% !important;
    width: 32px !important;
    height: 32px !important;
    margin-left: 8px !important;
    margin-right: 0 !important;
  }
  [data-testid="stChatMessageAvatarUser"] svg {
    display: none !important;
  }
  
  /* =========================
     5) 하단 입력 영역 (흰색 캡슐 스타일)
     ========================= */
  /* 입력창 전체 컨테이너 */
  [data-testid="stChatInput"] {
    width: 100% !important;
    background: transparent !important;
    padding: 0 16px 16px !important;
    box-sizing: border-box !important;
    margin: 0 auto !important;
  }
  
  /* 캡슐 래퍼 (입력창 + 버튼) */
  [data-testid="stChatInput"] > div {
    display: grid !important;
    grid-template-columns: 1fr auto !important;
    align-items: center !important;
    gap: 0 !important;
    background: #fff !important;
    border: 3px solid var(--border) !important;
    border-radius: 9999px !important;
    height: var(--input-h) !important;
    min-height: var(--input-h) !important;
    padding: 0 6px 0 0 !important;
    overflow: hidden !important;
  }
  
  /* 입력창 안내 텍스트 숨김 */
  [data-testid="stChatInput"] [data-testid="InputInstructions"] {
    display: none !important;
  }
  
  /* Base Web 래퍼 (투명 처리) */
  [data-testid="stChatInput"] [data-baseweb="base-input"] {
    height: var(--input-h) !important;
    box-sizing: border-box !important;
    background: transparent !important;
    border: none !important;
  }
  
  /* 실제 텍스트 입력 영역 (투명 처리) */
  [data-testid="stChatInputTextArea"],
  [data-testid="stChatInput"] textarea {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
    resize: none !important;
    width: 100% !important;
    height: 100% !important;
    min-height: 100% !important;
    line-height: calc(var(--input-h) - 24px) !important;
    padding: 12px 14px !important;
    margin: 0 !important;
    box-sizing: border-box !important;
  }
  
  /* 전송 버튼 */
  [data-testid="stChatInputSubmitButton"] {
    width: var(--input-h) !important;
    height: var(--input-h) !important;
    min-width: var(--input-h) !important;
    min-height: var(--input-h) !important;
    border-radius: calc(var(--input-h) / 2) !important;
    margin: 0 !important;
    align-self: center !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    background: var(--primary) !important;
    color: #fff !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  /* 전송 버튼 아이콘 */
  [data-testid="stChatInputSubmitButton"] svg,
  [data-testid="stChatInputSubmitButton"] svg path {
    fill: #fff !important;
    color: #fff !important;
  }
  
  /* =========================
     6) 기타 (캡션)
     ========================= */
  [data-testid="stCaptionContainer"] p {
    text-align: center !important;
    font-size: 0.9rem !important;
    color: #555 !important;
    margin: 0.5rem 0 1rem 0 !important;
  }